name: unit tests
on: [push]

jobs:
  test:
    name: Crudx Jest Tests
    runs-on: ubuntu-latest

    steps:
      - name: checkout repo
        uses: actions/checkout@v3

      - name: Build the Docker image
        run: docker compose up

      - name: Run unit tests
        run: ./test.sh crudx

      #- name: Upload coverage reports to Codacy
      #  uses: codacy/codacy-coverage-reporter-action@v1
      #  with:
      #    project-token: ${{ secrets.CODACY_PROJECT_TOKEN }}
      #    coverage-reports: /coverage/packages/crudx/coverage.xml